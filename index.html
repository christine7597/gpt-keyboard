<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPT Keyboard - ì‹¬ë¦¬í•™ íŠ¹í™” AI í‚¤ë³´ë“œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .api-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 2px solid #e0e0e0;
        }

        .api-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 1em;
        }

        input[type="text"],
        input[type="password"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #333;
            border: 2px solid #e0e0e0;
        }

        .btn-secondary:hover {
            background: #e9ecef;
        }

        .keyboard-area {
            margin-top: 30px;
        }

        .keyboard-area h3 {
            color: #333;
            margin-bottom: 15px;
        }

        textarea {
            min-height: 200px;
            resize: vertical;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .suggestions {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .suggestions h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .suggestion-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #e0e0e0;
        }

        .suggestion-item:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }

        .status {
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            text-align: center;
            font-weight: 600;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
        }

        .info-text {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
            line-height: 1.5;
        }

        .info-text a {
            color: #667eea;
            text-decoration: none;
        }

        .info-text a:hover {
            text-decoration: underline;
        }

        .char-count {
            text-align: right;
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âŒ¨ï¸ GPT Keyboard</h1>
            <p>ì‹¬ë¦¬í•™ íŠ¹í™” AI í‚¤ë³´ë“œ - ì‹¬ë¦¬í•™ ì „ë¬¸ê°€ë¥¼ ìœ„í•œ ìŠ¤ë§ˆíŠ¸ í…ìŠ¤íŠ¸ ì…ë ¥</p>
        </div>

        <div class="main-card">
            <div class="api-section">
                <h3>ğŸ”‘ OpenAI API ì„¤ì •</h3>
                <div class="form-group">
                    <label for="apiKey">OpenAI API Key (ì„ íƒì‚¬í•­)</label>
                    <input type="password" id="apiKey" placeholder="sk-... (API í‚¤ë¥¼ ì…ë ¥í•˜ë©´ GPT ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥)">
                    <div class="info-text">
                        API í‚¤ê°€ ì—†ì–´ë„ ê¸°ë³¸ ìë™ì™„ì„± ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                        API í‚¤ëŠ” <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a>ì—ì„œ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </div>
                </div>
                <button class="btn btn-primary" onclick="saveApiKey()">API í‚¤ ì €ì¥</button>
                <div id="apiStatus"></div>
            </div>

            <div class="keyboard-area">
                <h3>âœï¸ í…ìŠ¤íŠ¸ ì…ë ¥</h3>
                <div class="form-group">
                    <textarea id="textInput" placeholder="ì‹¬ë¦¬í•™ ê´€ë ¨ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...&#10;&#10;ì˜ˆ: ì¸ì§€ í–‰ë™ ì¹˜ë£Œ, ê³µê°ì  ëŒ€ì‘, ê°ì • ì¡°ì ˆ ë“±&#10;ì…ë ¥í•˜ë©´ AIê°€ ì‹¬ë¦¬í•™ ì „ë¬¸ê°€ ê´€ì ì—ì„œ ì œì•ˆì„ ì œê³µí•©ë‹ˆë‹¤."></textarea>
                    <div class="char-count">
                        <span id="charCount">0</span> ê¸€ì
                    </div>
                </div>

                <div class="suggestions" id="suggestions" style="display: none;">
                    <h4>ğŸ’¡ AI ì œì•ˆ</h4>
                    <div id="suggestionList"></div>
                </div>

                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="getAISuggestion()">ğŸ¤– AI ì œì•ˆ ë°›ê¸°</button>
                    <button class="btn btn-secondary" onclick="clearText()">ì§€ìš°ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const apiKeyInput = document.getElementById('apiKey');
        const textInput = document.getElementById('textInput');
        const suggestionsDiv = document.getElementById('suggestions');
        const suggestionList = document.getElementById('suggestionList');
        const charCount = document.getElementById('charCount');
        const apiStatus = document.getElementById('apiStatus');

        // ì €ì¥ëœ API í‚¤ ë¶ˆëŸ¬ì˜¤ê¸°
        const savedApiKey = localStorage.getItem('gpt_keyboard_api_key');
        if (savedApiKey) {
            apiKeyInput.value = savedApiKey;
            showStatus('API í‚¤ê°€ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.', 'success');
        }

        // API í‚¤ ì €ì¥
        function saveApiKey() {
            const apiKey = apiKeyInput.value.trim();
            if (apiKey) {
                localStorage.setItem('gpt_keyboard_api_key', apiKey);
                showStatus('API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } else {
                localStorage.removeItem('gpt_keyboard_api_key');
                showStatus('API í‚¤ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
            }
        }

        // ìƒíƒœ í‘œì‹œ
        function showStatus(message, type) {
            apiStatus.innerHTML = `<div class="status ${type}">${message}</div>`;
            setTimeout(() => {
                apiStatus.innerHTML = '';
            }, 3000);
        }

        // ê¸€ì ìˆ˜ ì¹´ìš´íŠ¸
        textInput.addEventListener('input', (e) => {
            charCount.textContent = e.target.value.length;
            // ì…ë ¥ ì¤‘ì¼ ë•Œ ê¸°ë³¸ ì œì•ˆ í‘œì‹œ
            if (e.target.value.length > 0) {
                showBasicSuggestions(e.target.value);
            } else {
                suggestionsDiv.style.display = 'none';
            }
        });

        // ê¸°ë³¸ ì œì•ˆ (API í‚¤ ì—†ì„ ë•Œ)
        function showBasicSuggestions(text) {
            const suggestions = generateBasicSuggestions(text);
            if (suggestions.length > 0) {
                displaySuggestions(suggestions);
            }
        }

        // ê¸°ë³¸ ì œì•ˆ ìƒì„± (ì‹¬ë¦¬í•™ íŠ¹í™”)
        function generateBasicSuggestions(text) {
            const suggestions = [];
            const lastWord = text.trim().split(/\s+/).pop().toLowerCase();
            
            // ì‹¬ë¦¬í•™ ê´€ë ¨ ìš©ì–´ ì™„ì„±
            const psychologyTerms = {
                'ì¸ì§€': ['ì¸ì§€ í–‰ë™ ì¹˜ë£Œ', 'ì¸ì§€ í–‰ë™ ì¹˜ë£Œ(CBT)', 'ì¸ì§€ ì™œê³¡'],
                'ê³µê°': ['ê³µê°ì  ëŒ€ì‘', 'ê³µê°í•˜ê¸°', 'ê³µê° ëŠ¥ë ¥'],
                'ê°ì •': ['ê°ì • ì¡°ì ˆ', 'ê°ì • ì¸ì‹', 'ê°ì • í‘œí˜„'],
                'ìŠ¤íŠ¸ë ˆìŠ¤': ['ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬', 'ìŠ¤íŠ¸ë ˆìŠ¤ ì™„í™”', 'ìŠ¤íŠ¸ë ˆìŠ¤ ëŒ€ì²˜'],
                'ë§ˆìŒì±™ê¹€': ['ë§ˆìŒì±™ê¹€ ëª…ìƒ', 'ë§ˆìŒì±™ê¹€ ì—°ìŠµ', 'ë§ˆìŒì±™ê¹€ ê¸°ë²•'],
                'ìì¡´ê°': ['ìì¡´ê° í–¥ìƒ', 'ìì¡´ê° í‚¤ìš°ê¸°', 'ìì¡´ê° íšŒë³µ'],
                'ë¶ˆì•ˆ': ['ë¶ˆì•ˆ ê´€ë¦¬', 'ë¶ˆì•ˆ ì™„í™”', 'ë¶ˆì•ˆ ëŒ€ì²˜'],
                'ìš°ìš¸': ['ìš°ìš¸ì¦', 'ìš°ìš¸ê°', 'ìš°ìš¸ ì¦ìƒ'],
                'ìƒë‹´': ['ìƒë‹´ ê³¼ì •', 'ìƒë‹´ ê¸°ë²•', 'ìƒë‹´ ì ‘ê·¼'],
                'ì¹˜ë£Œ': ['ì¹˜ë£Œ íš¨ê³¼', 'ì¹˜ë£Œ ê³¼ì •', 'ì¹˜ë£Œ ê¸°ë²•'],
                'íŠ¸ë¼ìš°ë§ˆ': ['íŠ¸ë¼ìš°ë§ˆ ì¹˜ë£Œ', 'íŠ¸ë¼ìš°ë§ˆ íšŒë³µ', 'íŠ¸ë¼ìš°ë§ˆ ëŒ€ì²˜'],
                'ì• ì°©': ['ì• ì°© ì´ë¡ ', 'ì• ì°© ìœ í˜•', 'ì• ì°© ê´€ê³„'],
                'ìê¸°íš¨ëŠ¥ê°': ['ìê¸°íš¨ëŠ¥ê° í–¥ìƒ', 'ìê¸°íš¨ëŠ¥ê°', 'ìê¸°íš¨ëŠ¥ê° ì¦ì§„'],
                'íšŒë³µíƒ„ë ¥ì„±': ['íšŒë³µíƒ„ë ¥ì„±', 'íšŒë³µíƒ„ë ¥ì„± í–¥ìƒ', 'íšŒë³µíƒ„ë ¥ì„± ê¸°ë¥´ê¸°']
            };

            for (const [key, values] of Object.entries(psychologyTerms)) {
                if (lastWord.startsWith(key) || key.startsWith(lastWord)) {
                    values.forEach(val => {
                        if (!suggestions.includes(val)) {
                            suggestions.push(val);
                        }
                    });
                }
            }

            // ë¬¸ì¥ ì™„ì„± ì œì•ˆ
            if (text.endsWith(' ')) {
                suggestions.push('ê³„ì† ì…ë ¥í•˜ì„¸ìš”...');
            }

            return suggestions.slice(0, 3);
        }

        // AI ì œì•ˆ ë°›ê¸°
        async function getAISuggestion() {
            const text = textInput.value.trim();
            if (!text) {
                showStatus('í…ìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            const apiKey = localStorage.getItem('gpt_keyboard_api_key');
            
            if (!apiKey) {
                // API í‚¤ê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ ì œì•ˆë§Œ í‘œì‹œ
                showBasicSuggestions(text);
                showStatus('API í‚¤ë¥¼ ì…ë ¥í•˜ë©´ ì‹¬ë¦¬í•™ ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ì œì•ˆì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'info');
                return;
            }

            // API í‚¤ê°€ ìˆìœ¼ë©´ GPT ì‚¬ìš©
            suggestionsDiv.style.display = 'block';
            suggestionList.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">AIê°€ ì œì•ˆì„ ìƒì„±í•˜ëŠ” ì¤‘...</div>';

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            {
                                role: 'system',
                                content: 'ë‹¹ì‹ ì€ ì‹¬ë¦¬í•™ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì‹¬ë¦¬í•™ ê´€ë ¨ í…ìŠ¤íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì „ë¬¸ì ì´ê³  ìì—°ìŠ¤ëŸ¬ìš´ ë‹¤ìŒ ë¬¸ì¥ì´ë‚˜ ìš©ì–´ë¥¼ 3ê°œ ì œì•ˆí•´ì£¼ì„¸ìš”. ê° ì œì•ˆì€ ì‹¬ë¦¬í•™ ì „ë¬¸ê°€ ê´€ì ì—ì„œ ì •í™•í•˜ê³  ê°„ê²°í•˜ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”.'
                            },
                            {
                                role: 'user',
                                content: `ë‹¤ìŒ ì‹¬ë¦¬í•™ ê´€ë ¨ í…ìŠ¤íŠ¸ì— ì´ì–´ì§ˆ ìˆ˜ ìˆëŠ” ì „ë¬¸ì ì¸ ì œì•ˆì„ 3ê°œ í•´ì£¼ì„¸ìš”: "${text}"`
                            }
                        ],
                        max_tokens: 100,
                        temperature: 0.7
                    })
                });

                if (!response.ok) {
                    throw new Error('API ìš”ì²­ ì‹¤íŒ¨');
                }

                const data = await response.json();
                const suggestions = data.choices[0].message.content
                    .split('\n')
                    .filter(line => line.trim().length > 0)
                    .map(line => line.replace(/^\d+\.\s*/, '').replace(/^[-*]\s*/, '').trim())
                    .slice(0, 3);

                displaySuggestions(suggestions);
            } catch (error) {
                console.error('Error:', error);
                showBasicSuggestions(text);
                showStatus('API ìš”ì²­ ì‹¤íŒ¨. ê¸°ë³¸ ì œì•ˆì„ í‘œì‹œí•©ë‹ˆë‹¤.', 'error');
            }
        }

        // ì œì•ˆ í‘œì‹œ
        function displaySuggestions(suggestions) {
            if (suggestions.length === 0) {
                suggestionsDiv.style.display = 'none';
                return;
            }

            suggestionsDiv.style.display = 'block';
            suggestionList.innerHTML = suggestions.map(suggestion => 
                `<div class="suggestion-item" onclick="applySuggestion('${suggestion.replace(/'/g, "\\'")}')">${suggestion}</div>`
            ).join('');
        }

        // ì œì•ˆ ì ìš©
        function applySuggestion(suggestion) {
            const currentText = textInput.value;
            textInput.value = currentText + (currentText.endsWith(' ') ? '' : ' ') + suggestion;
            charCount.textContent = textInput.value.length;
            suggestionsDiv.style.display = 'none';
            textInput.focus();
        }

        // í…ìŠ¤íŠ¸ ì§€ìš°ê¸°
        function clearText() {
            textInput.value = '';
            charCount.textContent = '0';
            suggestionsDiv.style.display = 'none';
        }

        // ì´ˆê¸° ê¸€ì ìˆ˜ í‘œì‹œ
        charCount.textContent = textInput.value.length;
    </script>
</body>
</html>

